---
layout: layouts/post.njk
title: >
      JSJ 267: Node 8.0 with Mikeal Rogers, Arunesh Chandra, and Anna Henningsen
date: 2017-06-27 04:00:19
episode_number: 267
duration: 52:16
audio_url: https://devchat.cachefly.net/javascriptjabber/JSJ_267_Node8.mp3
podcast: js-jabber
tags: 
  - js-jabber
  - podcast
---

<hr />

<h4>JSJ 267 Node 8 with Mikeal Rogers, Arunesh Chandra, and Anna Henningsen</h4>

<p>On today&#8217;s episode of JavaScript Jabber we have panelists Joe Eames, AJ O&#8217;Neil, Amiee Knight and Charles Max Wood and we are talking about Node 8. To help us we have special guests Mikeal Rodgers, Arunesh Chandra, and Anna Henningsen. It&#8217;s going to be a great show. Tune in. </p>

<hr />

<h5><span style="color: #808080;">[1:56]</span> Is Node 8 just an update or is there more?</h5>

<ul>
<li>More than just an update</li>
<li>Two main points:</li>
<li>Improved <a href="https://www.npmjs.com/package/prana">Prana</a> support</li>
<li>Native API</li>
<li>Native APIs are helpful for Native Add-ons. For both the consumer and the developer side.</li>
<li>Prior to update these Node Native modules ran in C++ and bound to specific to Node 8 APIs.</li>
<li>Causes these modules to be updated or reconciled every time these modules are rereleased.</li>
<li>Creates burden for module maintainers.</li>
<li>Creates friction in upgrading Node versions in production departments.</li>
<li>If you have a deployment depending on a certain Native module, some of the modules may not get updated in time when updating your Node versions. Keeping people from updating Node.</li>
<li>Creates compatibility issues with Node users not using Node 8</li>
<li>Experimental support for a Native layer in Node 8 to eliminate these issues as much as possible.</li>
<li>Important milestone for the module ecosystem.</li>
<li>You can write extensions for Node in C++ and it decouples V8 so you can use something else on the front.</li>
<li>Modules takes dependency on V8 API specific to a particular version. So if V8 changes your module will be extracted from that.</li>
<li>As a side benefit, you can have another VM to take advantage of that.</li>
<li>Major version upgrades mean updating Native modules and usually some of those modules haven&#8217;t updated to the newest version of Node and be complicated.</li>
<li>Deep dependency wise, about 30% depends on a Native module somewhere</li>
<li>In the future, with the Native API, you&#8217;ll be able to update Node without breaking modules.</li>
</ul>

<h5><span style="color: #808080;">[5:51]</span> What kind of work went into this?</h5>

<ul>
<li>Most of the work was in C++</li>
<li>First thing that was done was, they looked at the top dependent Native modules in the ecosystem.</li>
<li>Looked for what kind of V8 exposure they had and cataloged it</li>
<li>Looked at how these APIs and what their purposes were</li>
<li>Looked for a way to extract them so that they are part of Node Core</li>
<li>Created neutral APIs, now part of the Node core.</li>
<li>All C APIs</li>
<li>Also has a C++ wrapper to improves usability of the API.</li>
</ul>

<h5><span style="color: #808080;">[7:17]</span> What&#8217;s an example of what you can do with these APIs?</h5>

<ul>
<li>Native modules allows for tighter integration and better module performance</li>
<li>Specific APIs that you can use in V8 that isn&#8217;t available through JavaScript</li>
<li>If you have a C++ variable code and you want to expose a variable into JavaScript, that is V8 API note a Node 8 API</li>
<li>Having it bound directly to the VM was something they wanted for a long time</li>
<li>Google controls V8 and they bind to V8</li>
<li>Created a better relationship with Google starting in IOJS</li>
<li>Also worked with Microsoft with their Node Shocker work.</li>
<li>Same with <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Projects/SpiderMonkey">SpiderMonkey</a></li>
<li><a href="https://github.com/mozilla/spidernode">SpiderNode</a> is in the works</li>
</ul>

<h5><span style="color: #808080;">[9:23]</span> Have you guys done any testing for performance?</h5>

<ul>
<li>Some. There is a performance working group.</li>
<li>There is a need to stay on top of V8</li>
<li>V8 team has focused on new language features</li>
<li>Many features have been added over the years</li>
<li>Many didn&#8217;t come in optimized</li>
<li>The performance profile has changed with these features</li>
<li>If you&#8217;re using new language features, you will see a performance boost</li>
<li>In core, still tracking down code that was specific to the old optimizer and rewriting i to work the new optimizer</li>
<li><a href="https://turboc.codeplex.com/">Turbo C</a> compiler hasn&#8217;t landed yet, but is to come.</li>
<li>Will have a completely different performance profile</li>
<li>In most real world applications it will be faster</li>
<li>Waiting on the release to take a version of V8 to make it easier to upgrade features in the future</li>
</ul>

<h5><span style="color: #808080;">[11:28]</span> Are the new features picked up from V8 or implemented in Node?</h5>

<ul>
<li>It&#8217;s all in V8</li>
<li>Better longterm support</li>
<li>Promises are made better in Node as a platform</li>
<li>Added new method called <code>util.promisify()</code></li>
<li>Implementation comes from V8</li>
<li>Allows for more optimization for promises in Node core</li>
<li>Promise support for the one-deprecated domains module.</li>
</ul>

<h5><span style="color: #808080;">[13:02]</span> Is there anything more than NMP 5?</h5>

<ul>
<li>First off, delete your NMP cache.</li>
<li>It&#8217;s in your home directory usually with a .npm extension</li>
</ul>

<h5><span style="color: #808080;">[14:09]</span> What are the new features in V8?</h5>

<ul>
<li>Unlimited heap sizes, previously had a 4gb limit. No fixed limit.</li>
</ul>

<h5><span style="color: #808080;">[14:09]</span> Will you see things like chakra come out tuned for servers?</h5>

<ul>
<li>Profiles of a server for application process are getting smaller</li>
<li>Getting cut into containers and VMs and micro services</li>
<li>Vms that have cold boot time and run quickly in a strained environment is looking more like what we will see in the future</li>
<li>Yes, especially if you&#8217;re using cloud functions</li>
<li>V8 is optimized for phones, but Chakra is even more so</li>
<li>Looking for opportunities for VMs can be solely optimized for a device target</li>
<li>Node take advantage of that VM</li>
<li>VM neutrality is an interesting concept</li>
<li>VM Vendors trying to optimize it based on workloads of a server</li>
<li>Opens opportunities for Node</li>
<li>Node Chakra has been proved to iOS. You can cut off jitting off which was a requirement to be able to be in the Apple App Store</li>
<li>Node is not just for servers anymore</li>
<li>Node doesn&#8217;t take a long time configuring it</li>
<li>When a developer runs code on an IoT or a mobile app they don&#8217;t control the VM that is bundled, they run it on top of Node and it just works.</li>
<li>VM neutrality gives a new vector, so you can swam a whole different VM</li>
</ul>

<h5><span style="color: #808080;">[18:44]</span> When running different engines like iOS vs Android, does the profile change?</h5>

<ul>
<li>What it comes down to is if it&#8217;s eventive programming</li>
<li>The browser is an eventive environment, is very efficient waiting for things to happen before it does something</li>
<li>The way that we program servers and nodes are the same as well</li>
<li>the basics are the same generally</li>
<li>environmental differences exist but the programming model is usually the same</li>
<li>What does impact it is memory and processor and hardware and things like that</li>
<li>That is where tuning the VM comes into play</li>
</ul>

<h5><span style="color: #808080;">[20:29]</span> What is the new Async Hooks API used for?</h5>

<ul>
<li>Node has been lacking for automated inspection of Async Hook</li>
<li>No way for Node to tell you when scheduling and beginning of an Async operation. Hook helps with that</li>
<li>it&#8217;s a way for developers to write debugging features</li>
<li>Node tells the application that it&#8217;s working with Asynchronous way.</li>
<li>The embedded inspector has been embedded since Node 6</li>
<li>Now has a JavaScript API to use it</li>
<li>You can use things like Chrome debugger inside the running node process</li>
<li>Old debugging protocol has been removed</li>
<li>VM.run is still there but in the process of being deprecated</li>
</ul>

<h5><span style="color: #808080;">[22:34]</span> How like is the experimental Node API will change?</h5>

<ul>
<li>Marked as experimental because it&#8217;s the first time in the open</li>
<li>Hopefully out of experimental soon</li>
<li>Soon can port API to the existing LTS</li>
<li>Looking for more people to participate with the new API and give feedback</li>
<li>Fix any concerns before it goes to LTS</li>
<li>Some other experimental things are in the works like ASync Hooks and how it interacts with promises</li>
<li>Renaming some features</li>
<li>Another new feature - serializer and deserializer that comes with V8</li>
<li>experimental but will most likely stay</li>
</ul>

<h5><span style="color: #808080;">[25:31]</span> what is your standard for going to LTS?</h5>

<ul>
<li>Major releases every 6 months</li>
<li>Next Oct Node 9 will come out and then Node 8 will be LTS</li>
<li>Documentation, updates, additions etc will be ready then</li>
<li>Plan to do it for 2.5 years</li>
<li>Every even releases come out to LTS as the odd release comes out</li>
<li>Helps keeps a current line while having something new in the release line</li>
<li>Node 6 is the current LTS version</li>
</ul>

<h5><span style="color: #808080;">[27:26]</span> What are you taking out or deprecating in Node 8?</h5>

<ul>
<li>Use the word deprecate sparingly</li>
<li>If many people use features, it&#8217;s hard to get rid of</li>
<li>Security issue with Buffer, constructor argument was ambiguous</li>
<li>Had added APIs that were more explicit over time and pushed those</li>
<li>Now it will be deprecated</li>
</ul>

<h5><span style="color: #808080;">[28:43]</span> 21% - 33% Performance increase with some Node updates</h5>

<ul>
<li>Someone online updated their React app to Node 8 and found an 21% - 33% increase</li>
<li>Benchmarking group tests to make sure things are getting faster</li>
<li>V8 is always getting faster as well</li>
<li>Code changes fast and so there is a chance performance slows down so they have people to check</li>
<li>Benchmark test are all automated by a team</li>
</ul>

<h5><span style="color: #808080;">[30:47]</span> Is it safe to just switch to Node 8?</h5>

<ul>
<li>For front-end, yes</li>
<li>clear your NPM cache</li>
<li>Back use cases will usually wait until LTS</li>
</ul>

<h5><span style="color: #808080;">[31:28]</span> Where any of the features hard to implement?</h5>

<ul>
<li>The API work took about a year</li>
<li>It was a collaboration which made it interesting</li>
<li>IBM, Intel, Google were involved</li>
<li>The collaboration took a while</li>
<li>Also Async hooks took at least a year.</li>
<li>Async hooks used to be called async wraps and has been in the work for almost 3 years</li>
<li>many of the changes were the accumulation of small chances</li>
</ul>

<h5><span style="color: #808080;">[33:07]</span> It&#8217;s the little things</h5>

<ul>
<li>Letting people get small changes in accumulate into a big difference</li>
<li>the product gets much better that way</li>
</ul>

<h5><span style="color: #808080;">[33:57]</span> What versions of Node are you actively updating?</h5>

<ul>
<li>Current releases of Node 8 for a half of year</li>
<li>Node 6 is LTS</li>
<li>Additional year of maintenance of previous LTSs.</li>
<li>Schedule is at <a href="http://github.com/node8js/lts">http://github.com/node8js/lts</a> in a chart</li>
<li>Support for Node 4 with only critical updates, Node 6 minor updates, and Node 8</li>
<li>Node 7 doesn&#8217;t get much support unless it&#8217;s vital security supports.</li>
<li>If you&#8217;re running 0.10 or 0.12 stop. Those do not get security fixes anymore</li>
</ul>

<h5><span style="color: #808080;">[35:42]</span> Where do you see things going from here?</h5>

<ul>
<li>Mostly still working out Async hooks</li>
<li>Maybe add some web worker or worker support for Node JS</li>
<li>ES module support</li>
<li>Working to make promises better</li>
<li>Working on the performance profile and internal systems</li>
</ul>

<h5><span style="color: #808080;">[20:29]</span> What is the adoption like of Node 8?</h5>

<ul>
<li>Node team gets better at getting people to adopt quickly</li>
<li>but about 5% - 6% will not upgrade</li>
<li>community doubles each year at 8 million users right now</li>
<li><a href="https://hackernoon.com/upgrading-from-node-6-to-node-8-a-real-world-performance-comparison-3dfe1fbc92a3">Here is a graph on Twitter posted by NPM</a></li>
<li>Limiting breaks and softly deprecating things makes it&#8217;s easier to upgrade</li>
</ul>

<h5><span style="color: #808080;">[40:11]</span> How can people contribute and get involved?</h5>

<ul>
<li><a href="http://nodetodo.org">NodeToDo.org</a> shows how to make contribution</li>
<li>Occasionally major conferences have information on how to contribute</li>
<li>Test it out and help make it stronger</li>
</ul>

<h5><span style="color: #808080;">[42:08]</span> If people install Node 8 and have issues what can they do?</h5>

<ul>
<li>If it&#8217;s an NPM problem check with them</li>
<li>clear cache!</li>
<li>install newest version with: <code>npm install -g npm@latest</code></li>
<li>Report problems to either <a href="http://github.com/nmp/nmp">NPM</a> or <a href="http://github.com/nodejs/node">Node</a></li>
<li>If you&#8217;re not sure where the problem is, check <a href="http://github.com/nodejs/help">github.com/nodejs/help</a></li>
</ul>

<hr />

<h4>Links</h4>

<p><a href="https://nodejs.org/en/blog/release/v8.0.0/">Node8</a>
<a href="https://twitter.com/nodejs">Node&#8217;s Twitter</a>
<a href="https://medium.com/@nodejs">Node&#8217;s Medium</a>
<a href="http://github.com/nodejs/evangelism/">Node Evangelism Group</a> </p>

<p>Mikael on <a href="https://twitter.com/mikeal">Twitter</a> and <a href="https://github.com/mikeal">GitHub</a>
Arunesh on <a href="https://twitter.com/AruneshC">Twitter</a>
Anna on <a href="https://twitter.com/addaleax">Twitter</a> </p>

<hr />

<h4>Picks</h4>

<h5>AJ</h5>

<p><a href="http://smrpg.ocremix.org/">Overclocked Remix Super Mario RPG Window to The Stars</a> </p>

<h5>Amiee</h5>

<p><a href="https://blog.risingstack.com/important-features-fixes-node-js-version-8/">Blogpost RisingStack on Node 8</a><br/>
<a href="http://2frugaldudes.com/">2 Frugal Dudes</a> </p>

<h5>Charles</h5>

<p><a href="http://www.sho.com/homeland">Homeland</a><br/>
<a href="http://house-of-cards.wikia.com/wiki/Main_Page">House of Cards</a> </p>

<h5>Joe</h5>

<p><a href="https://www.youtube.com/watch?v=sm_hwxNTAa0">Shimmer Lake</a> </p>

<h5>Mikael</h5>

<p><a href="https://github.com/mafintosh/blake2b-wasm">Blake2b-wasm</a> </p>

<h5>Aremesh</h5>

<p>Current Nightly News </p>

<hr />

<h3>Transcript</h3>


