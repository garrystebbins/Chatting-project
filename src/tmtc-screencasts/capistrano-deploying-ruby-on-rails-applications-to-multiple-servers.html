---
layout: layouts/post.njk
title: >
      Capistrano: Deploying Ruby on Rails Applications to Multiple Servers
date: 2011-06-24 18:51:55
episode_number: 
duration: 
audio_url: 
podcast: tmtc-screencasts
tags: 
  - tmtc_screencasts
  - podcast
---

<object width="640" height="390"><param name="movie" value="http://www.youtube.com/v/8PJTcs2RMYY?version=3&amp;hl=en_US&amp;rel=0" /><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><embed type="application/x-shockwave-flash" width="640" height="390" src="http://www.youtube.com/v/8PJTcs2RMYY?version=3&amp;hl=en_US&amp;rel=0" allowscriptaccess="always" allowfullscreen="true"></embed></object>

For a basic deployment recipe, check out <a href="http://teachmetocode.com/screencasts/basic-deployment-with-capistrano/">Basic Deployment with Capistrano</a>

This episode demonstrates how to extend deployment to deploy to stage and production. Overall it’s rather simple. All it entails is creating a new task for each stage you want to deploy to with the settings you need changed.

Here’s an example:

task :stage do
role :web, "stage.teachmetocodeacademy.com"                          # Your HTTP server, Apache/etc
role :app, "stage.teachmetocodeacademy.com"                          # This may be the same as your `Web` server
role :db,  "stage.teachmetocodeacademy.com", :primary =&gt; true # This is where Rails migrations will run

set :deploy_to, '/var/www/stage-teachmetocodeacademy/'
set :user, 'deploy'
end

That will allow you to run `cap stage deploy` to deploy to your staging environment.

&nbsp;

<a href="http://traffic.libsyn.com/tmtc/TMTCMultistageDeploy.m4v">Download</a> 55.3 MB
<a href="http://traffic.libsyn.com/tmtc/TMTCMultistageDeploy_-_iPhone.m4v">Download (iPod &amp; iPhone)</a> 35.1 MB

<h3>Transcript</h3>


